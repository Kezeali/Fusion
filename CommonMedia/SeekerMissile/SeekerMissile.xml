<?xml version="1.0" encoding="iso-8859-1"?>
<FusionWeapon tag="SeekerMissile">
	<name>Seeker missile</name>
	<description>Seeks the nearerst ship. Trys to avoid terrain.</description>
	
  <!-- An auto-effect (an effect is created from this data, and will be
    automaticaly executed without scripting - in this case said event will
    be executed when the weapon is fired -->
	<fire>
		<duration>4</duration>
		<colour>
			<r>240</r>
			<g>200</g>
			<b>200</b>
		</colour>
		<image>Common/flash.png</image>
	</fire>
	
	<scripting script="SeekerMissile/SeekerMissile.as">
		<onfire>void onFire(uint16)</onfire>
	</scripting>
  
	<projectile name="seeker">
     <!-- The image displayed at the X-Y position of this projectile -->
		<image>SeekerMissile/missile.png</image>
    
    <!-- This could, alternatively, be an effect called in the onfire script,
      or even part of the <fire> auto-effect -->
    <creation>
      <sound>SeekerMissile/fire.wav</sound>
    </creation>
		
		<effect name="targetAquired">
			<particles>
				<count>10</count>
				<image>Common/dot.png</image>
			</particles>
			<sound>SeekerMissile/target_aquired.wav</sound>
		</effect>
		
		<!-- Another auto-effect - an Effect will be created based on this data.
			In other words, this section could be replaced with an effect section
      like the one above and called from the script on detonation -->
		<detonation>
			<image>Common/flash.png</image>
			<duration>4</duration>
      <sound>SeekerMissile/bang.wav</sound>
		</detonation>
		
		<!-- As above, this is an auto-effect -->
		<contrail>
			<duration>10</duration>
			<colour>
				<r>100</r>
				<g>100</g>
				<b>160</b>
			</colour>
			<image>Common/smoke.png</image>
		</contrail>
		
    <!-- Defines damage delt by the Detonate function-->
		<payload>
			<damage>0</damage>
			<blastradius>0</blastradius>
			<damageterrain>false</damageterrain>
		</payload>
		
		<physics>
			<mass>6</mass>
			<engineforce>0.2</engineforce>
			<facemotion>true</facemotion>
		</physics>
		
		<scripting script="SeekerMissile/SeekerMissile.as">
      <creation>void seekerCreation(uint16)</creation>
			<step>void seekerStep(uint16)</step>
			<onownercollision></onownercollision>
			<onanycollision>void seekerOnCollision(uint16, int, int)</onanycollision>
		</scripting>
	</projectile>

	<projectile name="cluster">
		<image>SeekerMissile/bit.png</image>
		
		<detonation>
			<image>Common/flash.png</image>
			<duration>4</duration>
		</detonation>
		
		<payload>
			<damage>10</damage>
			<blastradius>10</blastradius>
			<damageterrain>true</damageterrain>
		</payload>
		
		<physics>
			<mass>2</mass>
			<engineforce>10</engineforce>
			<facemotion>false</facemotion>
		</physics>
		
		<scripting script="SeekerMissile/SeekerMissile.as">
			<step>void clusterStep(uint16)</step>
			<onanycollision>void clusterOnCollision(uint16, int, int)</onanycollision>
		</scripting>
	</projectile>
</FusionWeapon>